<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta name="generator" content="Doxygen 1.8.6"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <title>Vargas: Main Page</title>
    <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css"/>
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="doxy-boot.js"></script>
</head>
<body>
<nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand">Vargas 1.0</a>
        </div>
    </div>
</nav>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <div class="content" id="content">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
                    <div style="margin-bottom: 15px;">
                        <!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Vargas Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#desc">Variant Genome Aligner/Simulator</a></li>
<li class="level1"><a href="#building">Building vargas</a><ul><li class="level2"><a href="#cloning">Cloning the vargas repo</a></li>
<li class="level2"><a href="#dependencies">Dependencies</a></li>
<li class="level2"><a href="#build">Building</a></li>
</ul>
</li>
<li class="level1"><a href="#modes">Modes of operation</a><ul><li class="level2"><a href="#define">define</a></li>
<li class="level2"><a href="#sim">sim</a></li>
<li class="level2"><a href="#align">align</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="desc"></a>
Variant Genome Aligner/Simulator</h1>
<p>Vargas aligns short reads to a directed acyclic graph (DAG). Reads are aligned using a SIMD vectorized version of Smith-Waterman, aligning multiple reads at once. The the aligner reports the best positions of reads without traceback to keep memory usage manageable. Additionally, vargas can be used to simulate reads from a DAG, and reads can be stratified by various parameters.</p>
<p><code>-h</code> can be used in any mode to obtain menus.</p>
<h1><a class="anchor" id="building"></a>
Building vargas</h1>
<h2><a class="anchor" id="cloning"></a>
Cloning the vargas repo</h2>
<p>When cloning, use the <code>--recursive</code> option to automatically retrieve dependencies.</p>
<pre class="fragment">git clone --recursive git@github.com:gaddra/vargas.git
</pre><h2><a class="anchor" id="dependencies"></a>
Dependencies</h2>
<p>Vargas relies on htslib to provide core file processing. Once cloned, the library is built with autoconf, version 2.63 or higher. </p>
<pre class="fragment">cd htslib
autoconf &amp;&amp; ./configure &amp;&amp; make
</pre><h2><a class="anchor" id="build"></a>
Building</h2>
<p>vargas is built with cmake. </p>
<pre class="fragment">mkdir build &amp;&amp; cd build
cmake -DCMAKE_BUILD_TYPE=Release .. &amp;&amp; make
cd ..
export PATH=${PWD}/bin:$PATH
</pre><h1><a class="anchor" id="modes"></a>
Modes of operation</h1>
<pre class="fragment">---------------------- vargas, Jun 24 2016. rgaddip1@jhu.edu ----------------------
Operating modes 'vargas MODE':
    define      Define a set of graphs for use with sim/align.
    sim         Simulate reads from a set of graphs.
    align       Align reads to a set of graphs.
    test        Run doctests.
    profile     Run profiles.
</pre><h2><a class="anchor" id="define"></a>
define</h2>
<pre class="fragment">-------------------- vargas define, Jun 24 2016. rgaddip1@jhu.edu --------------------
-f  --fasta         *&lt;string&gt; Reference filename.
-v  --var           *&lt;string&gt; VCF/BCF filename.
-t  --out           *&lt;string&gt; Output filename.
-g  --region        *&lt;string&gt; Region of graph, format CHR:MIN-MAX.
-l  --nodelen       &lt;int&gt; Max node length, default 1,000,000
-i  --ingroup       &lt;int, int...&gt; Percent ingroup subgraphs.
                    Prefix with 'c' to interpret as number of individuals.
-n  --num           &lt;int&gt; Number of unique graphs to create for all -i. Default 1.
</pre><p><code>define</code> is used to create a graph specification (*.gdf) for <code>sim</code> and <code>align</code> modes. Various subgraphs deriving off of a base graph are described. With <code>-i</code> and <code>-n</code> multiple subgraphs based on population filters are made. Graph definition files are marked with <code>@gdef</code>. The original FASTA and variant files are needed in the same relative path when using the GDEF file.</p>
<p>For example: </p>
<pre class="fragment">vargas define -f hs37d5.fa -v chr22.bcf -g 22:1,000,000-2,000,000 -i 15,30 -n 2 -t test.gdf
</pre><p>Will uniquely identify (including implicit graphs) 10 graphs:</p>
<p>2x 15% ingroup graphs</p>
<p>2x 30% ingroup graphs</p>
<p>2x 15% outgroup graphs</p>
<p>2x 30% outgroup graphs</p>
<p>Reference graph</p>
<p>Maximum allele frequency graph</p>
<p>The ingroup determines which samples are included in the graph. If a VCF file has 50 samples, a ingroup of up to 100 individuals can be included in an ingroup; each haplotype is treated independently.</p>
<h2><a class="anchor" id="sim"></a>
sim</h2>
<pre class="fragment">-------------------- vargas sim, Jun 24 2016. rgaddip1@jhu.edu --------------------
-g  --gdef          *&lt;string&gt; Graph definition file. Reads are simulated from Ingroups.
-t  --outfile       *&lt;string&gt; Alignment output file.
-o  --outgroup      Simulate from outgroup graphs.
-n  --numreads      &lt;int&gt; Number of reads to simulate from each subgraph, default 1000.
-m  --muterr        &lt;float, float...&gt; Read mutation error. Default 0.
-i  --indelerr      &lt;float, float...&gt; Read indel error. Default 0.
-v  --vnodes        &lt;int, int...&gt; Number of variant nodes, default any (-1).
-b  --vbases        &lt;int, int...&gt; Number of variant bases, default any (-1).
-l  --rlen          &lt;int&gt; Read length, default 50.
-a  --rate          Interpret -m, -i as rates, instead of exact number of errors.
-j  --threads       &lt;int&gt; Number of threads. 0 for maximum hardware concurrency.

Comments preceded by '#'.
-n reads are produced for each -s, -m, -i, -v combination.
</pre><p><code>sim</code> uses a GDEF file and generates <code>-n</code> reads of each combination of <code>-m</code>, <code>-i</code>, <code>-v</code>, and <code>-b</code>. <code>-m</code> Introduces mutation errors, substituting n bases with an alternate base. Likewise, <code>-i</code> will delete a base or insert a random base. With <code>-a</code>, <code>-m</code> and <code>-i</code> are interpreted as rates (0 to 1). <code>-s</code> controls which subgraphs are used to generate reads. By default, all graphs in the GDEF file are used, and their complements (outgroup).</p>
<p>For example: </p>
<pre class="fragment">vargas sim -g test.gdf -t reads -o -n 1000 -m 0,1,2 -v 0,1,2 -j 12
</pre><p>will generate 1000 reads for each combination of <code>-m</code>, <code>-v</code>, for each graph in <code>test.gdf</code> and their complements. This results in 3 -m * 3 -v * 1000 reads * 10 subgraphs = 90,000 reads.</p>
<h2><a class="anchor" id="align"></a>
align</h2>
<pre class="fragment">------------------- vargas align, Jun 24 2016. rgaddip1@jhu.edu -------------------
-g  --gdef          *&lt;string&gt; Graph definition file.
-r  --reads         *&lt;string, string...&gt; Read files to align.
-t  --outfile       *&lt;string&gt; Alignment output file.
-l  --rlen          &lt;int&gt; Max read length. Default 50.
-R                  Align to reference graph.
-X                  Align to maximum allele frequency graph.
-I                  Align to ingroup graph.
-O                  Align to outgroup graph.
-m  --match         &lt;int&gt; Match score, default 2.
-n  --mismatch      &lt;int&gt; Mismatch penalty, default 2.
-o  --gap_open      &lt;int&gt; Gap opening penalty, default 3.
-e  --gap_extend    &lt;int&gt; Gap extend penalty, default 1.
-j  --threads       &lt;int&gt; Number of threads. 0 for maximum hardware concurrency.
</pre><p>Lines beginning with '#' are ignored. Output format: [RXIO], read origin ingroup, read origin graph number, read sequence, read origin pos, read sub errors, read indel errors, read variant nodes, read variant bases, best score, best pos, best count, sub score, sub pos, sub count, corflag</p>
<p>Reads are aligned to graphs specified in the GDEF file. <code>-R</code> Aligns the reads to the reference sequence, <code>-X</code> to the maximum allele frequency graph, <code>-I</code> to the graph the read was generated from, and <code>-O</code> to the complement of the origin graph. A <code>[RXIO]</code> tag at the beginning of the alignment record indicates which alignment was done. The output alignment format is:</p>
<p><code>[RXIO], read origin ingroup, read origin graph number, read sequence, read origin pos, read sub errors, read indel errors, read variant nodes, read variant bases, best score, best pos, best count, sub score, sub pos, sub count, corflag</code></p>
<p>Where <code>corflag</code> is 1 if the read origin position had the best score, 2 if it had the second best score, otherwise 0.</p>
<p>For example: </p>
<pre class="fragment">vargas align  -g test.gdf -r reads -t reads.aligns -R -I -j 12
</pre><p>Will align all the reads to both the reference graph and ingroup graphs, resulting in 2 * number_of_reads alignments. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
        Generated on Sun Jun 26 2016 14:53:48 for Vargas by &#160;<a href="http://www.doxygen.org/index.html">
        <img class="footer" src="doxygen.png" alt="doxygen"/>
    </a> 1.8.6
    </small>
</address>
</body>
</html>
